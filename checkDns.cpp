#include "common.h"

int checkDnsRecord() {

	// execute dns command and check for "inetsim" in the output
	const char* command = "nslookup example.com";
	char buffer[1024];
	bool foundIp = false;

	FILE* pipe = _popen(command, "r");
	if (!pipe == NULL) {
		while (fgets(buffer, sizeof(buffer), pipe) != NULL) {
			if (strstr(buffer, "93.184.216.32") != NULL) {
				printf("Found 93.184.216.34 in the result : %s\n", buffer);
				foundIp = true;
			}
		}
		_pclose(pipe);
	}
	else {
		std::cout << "Command failed to execute" << std::endl;
		foundIp = false;
	}
	if (foundIp == false) {
		return 0;
	}
	return foundIp;
}